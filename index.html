<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Omkar Enterprises - Investor Relations</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root {
  --primary: #0A2540;
  --secondary: #C9A227;
  --light: #f8f9fa;
  --dark: #212529;
  --success: #28a745;
  --warning: #ffc107;
  --danger: #dc3545;
  --gray: #6c757d;
  --light-gray: #e9ecef;
}

body { 
  background-color: var(--light); 
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.dashboard-card { 
  border-radius: 1rem; 
  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075); 
  transition: all 0.3s ease;
  border: none;
}

.dashboard-card:hover {
  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
  transform: translateY(-2px);
}

#consentPopup { 
  display: none; 
  position: fixed; 
  top:0; 
  left:0; 
  width:100%; 
  height:100%; 
  background: rgba(0,0,0,0.7); 
  align-items:center; 
  justify-content:center; 
  z-index:9999; 
}

#consentBox { 
  background:#fff; 
  padding:30px; 
  border-radius:15px; 
  width:90%; 
  max-width:600px; 
  text-align:center; 
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  max-height: 90vh;
  overflow-y: auto;
}

#consentBox input, #consentBox button { 
  width: 100%; 
  margin: 10px 0; 
  padding:12px; 
  border-radius: 8px;
  border: 1px solid #ddd;
}

#consentBox button { 
  background:var(--primary); 
  color:#fff; 
  border:none; 
  font-weight: 600;
  cursor:pointer; 
  transition: all 0.3s;
}

#consentBox button:hover { 
  background:var(--secondary); 
  color:#000; 
}

.navbar-header { 
  display:flex; 
  justify-content:space-between; 
  align-items:center; 
  margin-bottom:20px; 
  padding: 15px 0;
  border-bottom: 1px solid var(--light-gray);
}

.navbar-header h2 { 
  margin:0; 
  color: var(--primary);
  font-weight: 700;
}

.nav-tabs .nav-link {
  color: var(--gray);
  font-weight: 500;
  border: none;
  padding: 12px 20px;
  border-radius: 8px 8px 0 0;
}

.nav-tabs .nav-link.active {
  color: var(--primary);
  background-color: white;
  border-bottom: 3px solid var(--secondary);
  font-weight: 600;
}

.nav-tabs .nav-link:hover {
  color: var(--primary);
  border-color: transparent;
}

.stat-card {
  text-align: center;
  padding: 20px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
  transition: all 0.3s;
}

.stat-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.stat-card h5 {
  color: var(--gray);
  font-size: 0.9rem;
  margin-bottom: 10px;
  font-weight: 600;
}

.stat-card h3 {
  color: var(--primary);
  font-weight: 700;
  margin: 0;
}

.investment-item {
  border-left: 4px solid var(--secondary);
  padding: 15px;
  margin-bottom: 15px;
  background: white;
  border-radius: 0 8px 8px 0;
}

.investment-item h6 {
  margin: 0 0 5px 0;
  color: var(--primary);
}

.investment-item p {
  margin: 0;
  color: var(--gray);
  font-size: 0.9rem;
}

.badge-status {
  padding: 5px 10px;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 600;
}

.badge-active {
  background-color: rgba(40, 167, 69, 0.1);
  color: var(--success);
}

.badge-pending {
  background-color: rgba(255, 193, 7, 0.1);
  color: var(--warning);
}

.badge-completed {
  background-color: rgba(108, 117, 125, 0.1);
  color: var(--gray);
}

.timeline {
  position: relative;
  padding-left: 30px;
}

.timeline::before {
  content: '';
  position: absolute;
  left: 15px;
  top: 0;
  bottom: 0;
  width: 2px;
  background: var(--light-gray);
}

.timeline-item {
  position: relative;
  margin-bottom: 20px;
}

.timeline-item::before {
  content: '';
  position: absolute;
  left: -24px;
  top: 5px;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--secondary);
  border: 2px solid white;
  box-shadow: 0 0 0 2px var(--secondary);
}

.timeline-date {
  font-size: 0.8rem;
  color: var(--gray);
}

.timeline-content {
  background: white;
  padding: 15px;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

.loading {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 200px;
}

.spinner {
  width: 40px;
  height: 40px;
  border: 4px solid rgba(0, 0, 0, 0.1);
  border-left-color: var(--secondary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.alert-custom {
  border-left: 4px solid var(--secondary);
  border-radius: 8px;
}

.hot-deal-card {
  border: 1px solid var(--secondary);
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.3s;
}

.hot-deal-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(201, 162, 39, 0.2);
}

.hot-deal-badge {
  position: absolute;
  top: 15px;
  right: 15px;
  background: var(--danger);
  color: white;
  padding: 5px 10px;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
}

.faq-item {
  margin-bottom: 15px;
  border-radius: 8px;
  overflow: hidden;
}

.faq-question {
  background: white;
  padding: 15px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: 600;
  color: var(--primary);
}

.faq-answer {
  background: var(--light-gray);
  padding: 0 15px;
  max-height: 0;
  overflow: hidden;
  transition: all 0.3s ease;
}

.faq-item.active .faq-answer {
  padding: 15px;
  max-height: 500px;
}

.footer {
  margin-top: 40px;
  padding: 20px 0;
  border-top: 1px solid var(--light-gray);
  color: var(--gray);
  font-size: 0.9rem;
  text-align: center;
}

.legal-text {
  font-size: 0.85rem;
  line-height: 1.5;
  text-align: left;
  background: #fff8e1;
  padding: 15px;
  border-radius: 8px;
  border-left: 4px solid var(--warning);
}

.risk-warning {
  background: #fff3cd;
  border-color: var(--warning);
  color: #856404;
}

.visitor-only, .investor-only {
  display: none;
}

.visitor-view .visitor-only {
  display: block;
}

.investor-view .investor-only {
  display: block;
}

.status-active { color: #27ae60; font-weight: bold; }
.status-inactive { color: #e74c3c; font-weight: bold; }
.status-pending { color: #f39c12; font-weight: bold; }
.status-unknown { color: #7f8c8d; font-weight: bold; }

.no-data {
    text-align: center;
    color: #6c757d;
    padding: 20px;
    font-style: italic;
}

.error-message {
    background: #e74c3c;
    color: white;
    padding: 15px;
    border-radius: 5px;
    margin: 20px;
    text-align: center;
    display: none;
}

.success-message {
    background: #27ae60;
    color: white;
    padding: 15px;
    border-radius: 5px;
    margin: 20px;
    text-align: center;
    display: none;
}

@media (max-width: 768px) {
  .navbar-header {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .navbar-header h2 {
    margin-bottom: 10px;
  }
  
  .nav-tabs .nav-link {
    padding: 10px 15px;
    font-size: 0.9rem;
  }
  
  #consentBox {
    padding: 20px;
    margin: 20px;
  }
}
</style>
</head>
<body class="visitor-view">

<!-- Consent Popup -->
<div id="consentPopup">
  <div id="consentBox">
    <h2 class="mb-4"><i class="fas fa-scale-balanced me-2"></i>Legal Consent Required</h2>
    <div class="alert alert-warning mb-4">
      <p class="mb-3"><strong>Important Legal Disclaimer - Read Carefully</strong></p>
      <div class="legal-text">
        <p><strong>Please read this carefully before proceeding:</strong></p>
        
        <p>✅ I confirm that I am voluntarily engaging in this private enquiry with Omkar Enterprises.</p>
        
        <p>✅ I understand that Omkar Enterprises is not a bank, NBFC, or deposit-taking company under the Companies Act, 2013 or the Banning of Unregulated Deposit Schemes Act, 2019.</p>
        
        <p>✅ I acknowledge that this enquiry is for private contractual arrangements only and does not constitute a public deposit, collective investment scheme, or fundraising invitation.</p>
        
        <p>✅ I agree that all discussions are confidential and subject to formal agreement before any transaction.</p>
        
        <p><strong>Investment Risk Acknowledgement:</strong></p>
        <p>✅ I understand that all investments carry risks, including potential loss of principal capital.</p>
        <p>✅ I acknowledge that returns are not guaranteed and may vary based on business performance.</p>
        <p>✅ I understand that there may be delays in returns or repayments due to business conditions.</p>
        <p>✅ I confirm I am investing capital I can afford to risk.</p>
        <p>✅ I understand that past performance doesn't guarantee future results.</p>
        
        <p class="mt-3"><strong>Proprietorship Structure Acknowledgement:</strong></p>
        <p>✅ I understand that Omkar Enterprises operates as a sole proprietorship under Indian laws.</p>
        <p>✅ I acknowledge that all investments are personal contractual arrangements between me and the proprietor.</p>
        <p>✅ I understand the proprietor's personal liability extends to all business obligations.</p>
        
        <p class="mt-3"><em>By proceeding, I acknowledge I have read and understood all the above points and accept all associated risks.</em></p>
      </div>
    </div>
    <form id="consentForm">
      <div class="form-check mb-3 text-start">
        <input class="form-check-input" type="checkbox" id="agreeCheck" required>
        <label class="form-check-label" for="agreeCheck">
          <strong>I agree to all terms, conditions, and risk disclosures stated above</strong>
        </label>
      </div>
      <input type="text" id="name" class="form-control" placeholder="Full Legal Name" required>
      <input type="email" id="email" class="form-control" placeholder="Email Address" required>
      <input type="tel" id="phone" class="form-control" placeholder="Contact Number" required minlength="10" maxlength="10" pattern="[6-9][0-9]{9}">
      <div class="alert alert-info mt-3">
        <small>
          <strong>Record Keeping:</strong> All consent records and transactions will be maintained for 5+ years as per regulatory requirements. You can request copies of your documents anytime.
        </small>
      </div>
      <button type="submit" class="btn mt-3">
        <i class="fas fa-check-circle me-2"></i>Accept & Proceed to Dashboard
      </button>
    </form>
    <p class="mt-3 small text-muted">
      <i class="fas fa-envelope me-1"></i>Need clarification? Contact: care@omkarservices.in
    </p>
  </div>
</div>

<!-- Dashboard Container -->
<div class="container py-4" id="dashboardContent">
  <!-- Success Message -->
  <div id="success-message" class="success-message"></div>
  
  <!-- Error Message -->
  <div id="error-message" class="error-message"></div>

  <div class="navbar-header">
    <div class="d-flex align-items-center">
      <div style="height:40px; width:40px; background:var(--primary); border-radius:8px; margin-right:10px; display:flex; align-items:center; justify-content:center; color:white; font-weight:bold;">OE</div>
      <h2 class="mb-0">Omkar Enterprises Investor Relations</h2>
    </div>
    <div class="investor-only">
      <span id="headerInvestorName" class="me-3 fw-bold"></span>
      <button class="btn btn-outline-danger btn-sm" id="logoutBtn"><i class="fas fa-sign-out-alt me-1"></i>Logout</button>
    </div>
  </div>

  <ul class="nav nav-tabs" id="dashboardTabs">
    <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#overview"><i class="fas fa-tachometer-alt me-1"></i>Overview</a></li>
    <li class="nav-item investor-only"><a class="nav-link" data-bs-toggle="tab" href="#investor"><i class="fas fa-user me-1"></i>My Investments</a></li>
    <li class="nav-item investor-only"><a class="nav-link" data-bs-toggle="tab" href="#agreement"><i class="fas fa-file-contract me-1"></i>Agreements</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#earnings"><i class="fas fa-money-bill-wave me-1"></i>How You Earn</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#risk"><i class="fas fa-exclamation-triangle me-1"></i>Risk Disclosure</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#hotdeals"><i class="fas fa-fire me-1"></i>Investment Opportunities</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#faq"><i class="fas fa-question-circle me-1"></i>FAQ</a></li>
  </ul>

  <div class="tab-content pt-4">
    <!-- Overview Tab -->
    <div class="tab-pane fade show active" id="overview">
      <!-- Visitor Overview -->
      <div class="visitor-only">
        <div class="alert alert-warning alert-custom mb-4">
          <h6><i class="fas fa-exclamation-triangle me-2"></i>Important Notice</h6>
          <p class="mb-0">This is a private investor portal. All investments are subject to signed agreements and carry risks. Please read the Risk Disclosure tab before proceeding.</p>
        </div>
        
        <div class="row g-3 mb-4">
          <div class="col-md-3">
            <div class="stat-card">
              <h5>Total Investments</h5>
              <h3 id="totalInvestments">Loading...</h3>
              <p class="text-muted small mt-2">All time</p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="stat-card">
              <h5>Total Payouts</h5>
              <h3 id="totalPayouts">Loading...</h3>
              <p class="text-muted small mt-2">All time</p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="stat-card">
              <h5>Active Investors</h5>
              <h3 id="activeInvestors">Loading...</h3>
              <p class="text-muted small mt-2">Currently active</p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="stat-card">
              <h5>Avg. Returns</h5>
              <h3 id="avgReturns">Loading...</h3>
              <p class="text-muted small mt-2">Annualized</p>
            </div>
          </div>
        </div>
        
        <div class="row g-3 mb-4">
          <div class="col-md-8">
            <div class="p-3 bg-white dashboard-card">
              <h6 class="mb-3">Investments vs Payouts</h6>
              <canvas id="investmentChart" height="250"></canvas>
            </div>
          </div>
          <div class="col-md-4">
            <div class="p-3 bg-white dashboard-card">
              <h6 class="mb-3">Investor Tenure Distribution</h6>
              <canvas id="tenureChart" height="250"></canvas>
            </div>
          </div>
        </div>
        
        <div class="row">
          <div class="col-12">
            <div class="p-3 bg-white dashboard-card">
              <h6 class="mb-3">Why Choose Omkar Enterprises?</h6>
              <div class="row">
                <div class="col-md-4 mb-3">
                  <div class="text-center p-3">
                    <i class="fas fa-shield-alt fa-2x text-primary mb-2"></i>
                    <h6>Secure Investments</h6>
                    <p class="small text-muted">Legally binding agreements with proper collateral</p>
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <div class="text-center p-3">
                    <i class="fas fa-chart-line fa-2x text-success mb-2"></i>
                    <h6>Consistent Returns</h6>
                    <p class="small text-muted">Proven track record of 12-15% annual returns</p>
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <div class="text-center p-3">
                    <i class="fas fa-handshake fa-2x text-warning mb-2"></i>
                    <h6>Transparent Process</h6>
                    <p class="small text-muted">Complete visibility into your investment journey</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Investor Overview -->
      <div class="investor-only">
        <div class="row g-3 mb-4">
          <div class="col-md-3">
            <div class="stat-card">
              <h5>My Investments</h5>
              <h3 id="myTotalInvestments">₹0</h3>
              <p class="text-muted small mt-2">All time</p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="stat-card">
              <h5>My Payouts</h5>
              <h3 id="myTotalPayouts">₹0</h3>
              <p class="text-muted small mt-2">All time</p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="stat-card">
              <h5>Current Value</h5>
              <h3 id="currentValue">₹0</h3>
              <p class="text-muted small mt-2">Portfolio value</p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="stat-card">
              <h5>Next Payout</h5>
              <h3 id="nextPayoutDate">-</h3>
              <p class="text-muted small mt-2">Estimated date</p>
            </div>
          </div>
        </div>
        
        <div class="row g-3 mb-4">
          <div class="col-md-8">
            <div class="p-3 bg-white dashboard-card">
              <h6 class="mb-3">My Investment Growth</h6>
              <canvas id="myInvestmentChart" height="250"></canvas>
            </div>
          </div>
          <div class="col-md-4">
            <div class="p-3 bg-white dashboard-card">
              <h6 class="mb-3">My Portfolio Allocation</h6>
              <canvas id="portfolioChart" height="250"></canvas>
            </div>
          </div>
        </div>
        
        <div class="row">
          <div class="col-md-6">
            <div class="p-3 bg-white dashboard-card">
              <h6 class="mb-3">My Recent Investments</h6>
              <div id="myRecentInvestments">
                <div class="loading">
                  <div class="spinner"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="p-3 bg-white dashboard-card">
              <h6 class="mb-3">Upcoming Payouts</h6>
              <div id="upcomingPayouts">
                <div class="loading">
                  <div class="spinner"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Other tabs remain the same as in your original HTML -->
    <!-- Investor Tab -->
    <div class="tab-pane fade investor-only" id="investor">
      <div class="row">
        <div class="col-md-8">
          <div class="p-3 bg-white dashboard-card">
            <h6 class="mb-3">Investment Timeline</h6>
            <div id="investmentTimeline">
              <div class="loading">
                <div class="spinner"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="p-3 bg-white dashboard-card">
            <h6 class="mb-3">Investment Calculator</h6>
            <div class="mb-3">
              <label class="form-label">Investment Amount (₹)</label>
              <input type="number" class="form-control" id="calcAmount" value="100000" min="50000" max="2000000">
            </div>
            <div class="mb-3">
              <label class="form-label">Tenure (Months)</label>
              <select class="form-select" id="calcTenure">
                <option value="6">6 Months</option>
                <option value="12" selected>12 Months</option>
                <option value="24">24 Months</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label">Expected Return Rate (%)</label>
              <input type="number" class="form-control" id="calcRate" value="12" step="0.1">
            </div>
            <button class="btn btn-primary w-100" id="calculateBtn">Calculate Returns</button>
            <div class="mt-3 p-3 bg-light rounded">
              <p class="mb-1">Estimated Returns: <strong id="estimatedReturns">₹0</strong></p>
              <p class="mb-0">Total Value: <strong id="totalValue">₹0</strong></p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Agreements Tab -->
    <div class="tab-pane fade investor-only" id="agreement">
      <div class="p-3 bg-white dashboard-card">
        <h6 class="mb-3">My Agreements</h6>
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Agreement ID</th>
                <th>Date</th>
                <th>Type</th>
                <th>Amount</th>
                <th>Status</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="agreementsTable">
              <tr>
                <td colspan="6" class="text-center py-4">
                  <div class="loading">
                    <div class="spinner"></div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Earnings Tab -->
    <div class="tab-pane fade" id="earnings">
      <div class="p-3 bg-white dashboard-card">
        <h6 class="mb-3">How You Earn Returns</h6>
        <div class="row">
          <div class="col-md-4 mb-4">
            <div class="text-center p-3">
              <i class="fas fa-chart-line fa-3x text-primary mb-3"></i>
              <h5>Capital Growth</h5>
              <p class="text-muted">Your investment grows through carefully selected business opportunities with proven track records.</p>
            </div>
          </div>
          <div class="col-md-4 mb-4">
            <div class="text-center p-3">
              <i class="fas fa-money-bill-wave fa-3x text-success mb-3"></i>
              <h5>Regular Payouts</h5>
              <p class="text-muted">Receive monthly or quarterly returns based on the performance of underlying assets.</p>
            </div>
          </div>
          <div class="col-md-4 mb-4">
            <div class="text-center p-3">
              <i class="fas fa-compound-interest fa-3x text-warning mb-3"></i>
              <h5>Compounding</h5>
              <p class="text-muted">Reinvest your returns to benefit from compounding and accelerate wealth creation.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Risk Disclosure Tab -->
    <div class="tab-pane fade" id="risk">
      <div class="p-3 bg-white dashboard-card">
        <h6 class="mb-3">Investment Risk Disclosure</h6>
        <div class="alert alert-warning risk-warning">
          <h6><i class="fas fa-exclamation-triangle me-2"></i>Important Risk Notice</h6>
          <p class="mb-0">All investments carry risks. Please read this disclosure carefully before making any investment decisions.</p>
        </div>
        
        <div class="legal-text mt-4">
          <h6 class="mb-3">1. Capital Risk</h6>
          <p>Your invested capital is at risk. There is no guarantee that you will get back the full amount you invested. Business conditions, market fluctuations, and other factors may affect the value of your investment.</p>
          
          <h6 class="mb-3">2. Return Risk</h6>
          <p>Returns are not guaranteed and may vary. Past performance does not guarantee future results. The projected returns are estimates based on current conditions and may change.</p>
          
          <h6 class="mb-3">3. Liquidity Risk</h6>
          <p>Investments may have limited liquidity. You may not be able to withdraw your funds immediately and may need to wait until the completion of the investment tenure or as per the agreement terms.</p>
          
          <h6 class="mb-3">4. Business Risk</h6>
          <p>Investments are subject to business risks including operational challenges, market competition, regulatory changes, and economic conditions that may affect performance.</p>
          
          <h6 class="mb-3">5. No Insurance Coverage</h6>
          <p>Unlike bank deposits, these investments are not insured by any government insurance scheme. There is no deposit insurance protection.</p>
          
          <h6 class="mb-3">6. Regulatory Framework</h6>
          <p>Omkar Enterprises operates as a private proprietorship. All investments are private contractual arrangements and not regulated as public deposits or collective investment schemes.</p>
        </div>
      </div>
    </div>

    <!-- Hot Deals Tab -->
    <div class="tab-pane fade" id="hotdeals">
      <div class="row g-3">
        <div class="col-md-6">
          <div class="hot-deal-card position-relative">
            <div class="hot-deal-badge">Limited Time</div>
            <div class="p-4">
              <h5>Monthly Income Plan</h5>
              <p class="text-muted">Get regular monthly returns with stable capital protection</p>
              <div class="row text-center">
                <div class="col-4">
                  <small class="text-muted">Returns</small>
                  <h6 class="mb-0">12-15%</h6>
                </div>
                <div class="col-4">
                  <small class="text-muted">Tenure</small>
                  <h6 class="mb-0">12-24 Months</h6>
                </div>
                <div class="col-4">
                  <small class="text-muted">Min Investment</small>
                  <h6 class="mb-0">₹50,000</h6>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="hot-deal-card position-relative">
            <div class="hot-deal-badge">High Growth</div>
            <div class="p-4">
              <h5>Commercial Real Estate</h5>
              <p class="text-muted">Invest in premium commercial properties with high appreciation potential</p>
              <div class="row text-center">
                <div class="col-4">
                  <small class="text-muted">Returns</small>
                  <h6 class="mb-0">15-18%</h6>
                </div>
                <div class="col-4">
                  <small class="text-muted">Tenure</small>
                  <h6 class="mb-0">24-36 Months</h6>
                </div>
                <div class="col-4">
                  <small class="text-muted">Min Investment</small>
                  <h6 class="mb-0">₹2,00,000</h6>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- FAQ Tab -->
    <div class="tab-pane fade" id="faq">
      <div class="p-3 bg-white dashboard-card">
        <h6 class="mb-3">Frequently Asked Questions</h6>
        <div class="faq-item">
          <div class="faq-question">
            How do I start investing?
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>To start investing, you need to complete the legal consent process, provide your details, and then you can explore available investment opportunities. All investments require signed agreements.</p>
          </div>
        </div>
        <div class="faq-item">
          <div class="faq-question">
            What is the minimum investment amount?
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>The minimum investment amount is ₹50,000. However, specific opportunities may have different minimum requirements.</p>
          </div>
        </div>
        <div class="faq-item">
          <div class="faq-question">
            How are returns paid out?
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>Returns are typically paid monthly or quarterly, depending on the investment plan. Payouts are made via bank transfer to your registered account.</p>
          </div>
        </div>
        <div class="faq-item">
          <div class="faq-question">
            Can I withdraw my investment early?
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>Early withdrawal may be possible but is subject to terms in your agreement and may involve exit charges or reduced returns. Please refer to your specific agreement terms.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="footer">
    <p>© 2023 Omkar Enterprises. All rights reserved. | 
      <a href="#" class="text-muted">Privacy Policy</a> | 
      <a href="#" class="text-muted">Terms of Service</a> |
      <a href="#" class="text-muted" data-bs-toggle="tab" href="#risk">Risk Disclosure</a>
    </p>
    <p class="small">
      <strong>Legal Disclaimer:</strong> Omkar Enterprises is a private consultancy firm and not a bank or NBFC. 
      All investments are private contractual arrangements subject to individual agreements. 
      Investments carry risks including potential loss of principal. Past performance doesn't guarantee future returns. 
      Please read all agreement documents carefully before investing.
    </p>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
// ✅ CONFIGURATION - USE YOUR ACTUAL GOOGLE APPS SCRIPT URL
const API_URL = "https://script.google.com/macros/s/AKfycbwsAG2uqUswgkZ8U3yhBUz7K9T5X9O_WZRssXEuQVcpxF7HGnPbQWkhf1dhj-_moDui/exec";

// DOM Elements
const consentPopup = document.getElementById("consentPopup");
const dashboardContent = document.getElementById("dashboardContent");

// ✅ Initialize the dashboard
function initDashboard() {
    initCharts();
    setupEventListeners();
    initFAQ();
    
    const investorEmail = localStorage.getItem("investorEmail");
    if (investorEmail) {
        switchToInvestorView();
        loadInvestorData(investorEmail);
    } else {
        switchToVisitorView();
        loadOverviewData();
    }
}

// ✅ Switch between visitor and investor views
function switchToInvestorView() {
    document.body.classList.remove('visitor-view');
    document.body.classList.add('investor-view');
    consentPopup.style.display = 'none';
    dashboardContent.style.display = 'block';
}

function switchToVisitorView() {
    document.body.classList.remove('investor-view');
    document.body.classList.add('visitor-view');
    dashboardContent.style.display = 'block';
    
    const investorEmail = localStorage.getItem("investorEmail");
    if (!investorEmail) {
        consentPopup.style.display = 'flex';
    }
}

// ✅ Initialize charts
function initCharts() {
    // Visitor Charts
    const ctx1 = document.getElementById('investmentChart');
    if (ctx1) {
        new Chart(ctx1.getContext('2d'), {
            type: 'bar',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct'],
                datasets: [
                    {
                        label: 'Investments (₹ Lakhs)',
                        data: [8, 12, 9, 15, 18, 12, 16, 14, 17, 13],
                        backgroundColor: 'rgba(10, 37, 64, 0.7)',
                        borderColor: 'rgba(10, 37, 64, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Payouts (₹ Lakhs)',
                        data: [1.5, 1.8, 2.2, 2.5, 2.8, 2.4, 2.6, 2.9, 3.1, 2.7],
                        backgroundColor: 'rgba(201, 162, 39, 0.7)',
                        borderColor: 'rgba(201, 162, 39, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Amount (₹ Lakhs)'
                        }
                    }
                }
            }
        });
    }

    const ctx2 = document.getElementById('tenureChart');
    if (ctx2) {
        new Chart(ctx2.getContext('2d'), {
            type: 'doughnut',
            data: {
                labels: ['3 Months', '6 Months', '12 Months', '24 Months'],
                datasets: [{
                    data: [15, 25, 45, 15],
                    backgroundColor: [
                        'rgba(10, 37, 64, 0.8)',
                        'rgba(201, 162, 39, 0.8)',
                        'rgba(40, 167, 69, 0.8)',
                        'rgba(108, 117, 125, 0.8)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });
    }
}

// ✅ Load overview data for visitors
async function loadOverviewData() {
    try {
        const response = await fetch(API_URL);
        const data = await response.json();
        
        if (data?.success && data?.overview) {
            safeUpdateElement('totalInvestments', data.overview.totalInvestments || "₹2.8Cr");
            safeUpdateElement('totalPayouts', data.overview.totalPayouts || "₹32L");
            safeUpdateElement('activeInvestors', data.overview.activeInvestors || "47");
            safeUpdateElement('avgReturns', data.overview.avgReturns || "12.5%");
        } else {
            // Fallback data
            safeUpdateElement('totalInvestments', "₹2.8Cr");
            safeUpdateElement('totalPayouts', "₹32L");
            safeUpdateElement('activeInvestors', "47");
            safeUpdateElement('avgReturns', "12.5%");
        }
    } catch (err) {
        console.error("Error loading overview:", err);
        // Fallback to static data
        safeUpdateElement('totalInvestments', "₹2.8Cr");
        safeUpdateElement('totalPayouts', "₹32L");
        safeUpdateElement('activeInvestors', "47");
        safeUpdateElement('avgReturns', "12.5%");
    }
}

// ✅ Load investor data
async function loadInvestorData(email) {
    showLoading(true);
    
    try {
        const response = await fetch(`${API_URL}?email=${encodeURIComponent(email)}`);
        
        if (!response.ok) {
            throw new Error(`Network error: ${response.status}`);
        }
        
        const data = await response.json();
        
        if (!data || typeof data !== 'object') {
            throw new Error('Invalid data received from server');
        }

        if (!data.exists) {
            showErrorMessage('Investor data not found in our system');
            return;
        }

        // Process and update UI with investor data
        updateDashboardUI(data);
        
    } catch (error) {
        console.error('Error loading investor data:', error);
        showErrorMessage(`Failed to load investor data: ${error.message}`);
        
        // Fallback to demo data
        showDemoDashboard();
    } finally {
        showLoading(false);
    }
}

// ✅ Update dashboard UI
function updateDashboardUI(data) {
    try {
        // Personal Information
        safeUpdateElement('headerInvestorName', data.name);
        safeUpdateElement('myTotalInvestments', formatCurrency(data.totalInvestment || 0));
        safeUpdateElement('myTotalPayouts', formatCurrency(data.totalPayouts || 0));
        safeUpdateElement('currentValue', formatCurrency(data.currentPortfolioValue || 0));
        safeUpdateElement('nextPayoutDate', data.nextPayoutDate || 'Not Scheduled');

        // Initialize investor charts
        initInvestorCharts(data);

        console.log('Dashboard updated successfully');

    } catch (error) {
        console.error('Error updating dashboard UI:', error);
        showErrorMessage('Error updating dashboard display: ' + error.message);
    }
}

// ✅ Initialize investor charts
function initInvestorCharts(investorData) {
    // My Investment Chart
    const ctx3 = document.getElementById('myInvestmentChart');
    if (ctx3) {
        new Chart(ctx3.getContext('2d'), {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct'],
                datasets: [{
                    label: 'Portfolio Value (₹)',
                    data: [500000, 650000, 800000, 950000, 1100000, 1250000, 1300000, 1350000, 1375000, 1400000],
                    backgroundColor: 'rgba(201, 162, 39, 0.1)',
                    borderColor: 'rgba(201, 162, 39, 1)',
                    borderWidth: 2,
                    tension: 0.3,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: false,
                        title: {
                            display: true,
                            text: 'Portfolio Value (₹)'
                        }
                    }
                }
            }
        });
    }

    // Portfolio Chart
    const ctx4 = document.getElementById('portfolioChart');
    if (ctx4) {
        new Chart(ctx4.getContext('2d'), {
            type: 'pie',
            data: {
                labels: ['Commercial Real Estate', 'Fixed Income', 'Tech Startup'],
                datasets: [{
                    data: [40, 28, 32],
                    backgroundColor: [
                        'rgba(10, 37, 64, 0.8)',
                        'rgba(201, 162, 39, 0.8)',
                        'rgba(40, 167, 69, 0.8)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });
    }
}

// ✅ Utility functions
function safeUpdateElement(elementId, value) {
    const element = document.getElementById(elementId);
    if (element) {
        element.textContent = value;
    }
}

function formatCurrency(amount) {
    if (typeof amount !== 'number' || isNaN(amount)) {
        amount = 0;
    }
    
    try {
        return new Intl.NumberFormat('en-IN', {
            style: 'currency',
            currency: 'INR',
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
        }).format(amount);
    } catch (error) {
        return `₹${amount.toLocaleString('en-IN')}`;
    }
}

function showLoading(show) {
    // Implement loading indicators if needed
}

function showErrorMessage(message) {
    const errorElement = document.getElementById('error-message');
    if (errorElement) {
        errorElement.textContent = message;
        errorElement.style.display = 'block';
        
        setTimeout(() => {
            errorElement.style.display = 'none';
        }, 5000);
    }
}

function showSuccessMessage(message) {
    const successElement = document.getElementById('success-message');
    if (successElement) {
        successElement.textContent = message;
        successElement.style.display = 'block';
        
        setTimeout(() => {
            successElement.style.display = 'none';
        }, 5000);
    }
}

// ✅ Demo data fallback
function showDemoDashboard() {
    const demoData = {
        name: localStorage.getItem("investorName") || "Demo Investor",
        email: localStorage.getItem("investorEmail") || "demo@example.com",
        phone: localStorage.getItem("investorPhone") || "Not provided",
        totalInvestment: 100000,
        totalPayouts: 11500,
        currentPortfolioValue: 88500,
        roi: 0.10,
        nextPayoutDate: "2025-11-05",
        memberSince: "2024-01-01",
        status: "Active"
    };
    
    updateDashboardUI(demoData);
}

// ✅ Event listeners and initialization
function setupEventListeners() {
    // Logout button
    document.getElementById('logoutBtn')?.addEventListener('click', () => {
        localStorage.removeItem("investorEmail");
        localStorage.removeItem("investorName");
        localStorage.removeItem("investorPhone");
        window.location.reload();
    });
    
    // Return calculator
    document.getElementById('calculateBtn')?.addEventListener('click', calculateReturns);
    
    // Initialize calculator with default values
    calculateReturns();
    
    // Phone number validation
    document.getElementById('phone')?.addEventListener('input', function(e) {
        this.value = this.value.replace(/\D/g, '').slice(0, 10);
    });
}

function calculateReturns() {
    const amount = parseFloat(document.getElementById('calcAmount')?.value) || 0;
    const tenure = parseInt(document.getElementById('calcTenure')?.value) || 12;
    const rate = parseFloat(document.getElementById('calcRate')?.value) || 12;
    
    const returns = (amount * rate * tenure) / 1200;
    const totalValue = amount + returns;
    
    safeUpdateElement('estimatedReturns', formatCurrency(returns));
    safeUpdateElement('totalValue', formatCurrency(totalValue));
}

function initFAQ() {
    const faqItems = document.querySelectorAll('.faq-item');
    
    faqItems.forEach(item => {
        const question = item.querySelector('.faq-question');
        
        question.addEventListener('click', () => {
            // Close all other items
            faqItems.forEach(otherItem => {
                if (otherItem !== item) {
                    otherItem.classList.remove('active');
                }
            });
            
            // Toggle current item
            item.classList.toggle('active');
        });
    });
}

// ✅ CONSENT FORM HANDLING - FIXED VERSION
document.getElementById('consentForm')?.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const phone = document.getElementById('phone').value;
    
    // Validate phone number
    if (!/^[6-9]\d{9}$/.test(phone)) {
        alert('Please enter a valid 10-digit Indian mobile number');
        return;
    }
    
    const submitBtn = e.target.querySelector('button[type="submit"]');
    const originalText = submitBtn.innerHTML;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Processing...';
    submitBtn.disabled = true;

    try {
        console.log('Sending consent data to Google Apps Script...');
        
        // Use URLSearchParams for proper formatting
        const formData = new URLSearchParams();
        formData.append('name', name);
        formData.append('email', email);
        formData.append('phone', phone);
        formData.append('consent', 'true');

        const response = await fetch(API_URL, {
            method: "POST",
            headers: {
                "Content-Type": "application/x-www-form-urlencoded",
            },
            body: formData
        });
        
        console.log('Response status:', response.status);
        
        const responseText = await response.text();
        console.log('Raw response:', responseText);
        
        let data;
        try {
            data = JSON.parse(responseText);
        } catch (parseError) {
            console.error('JSON parse error:', parseError);
            throw new Error('Invalid response from server');
        }
        
        console.log('Parsed response data:', data);
        
        if (data?.success) {
            // Success - store user data and switch to investor view
            localStorage.setItem("investorEmail", email);
            localStorage.setItem("investorName", name);
            localStorage.setItem("investorPhone", phone);
            
            showSuccessMessage('✅ Legal consent recorded successfully!');
            consentPopup.style.display = "none";
            switchToInvestorView();
            loadInvestorData(email);
        } else {
            // Show specific error message from server
            const errorMsg = data?.message || "Error saving consent. Please try again.";
            showErrorMessage('❌ ' + errorMsg);
            console.error('Server error:', data);
        }
    } catch (err) {
        console.error("Network error:", err);
        
        // Enhanced error message
        showErrorMessage(`⚠️ Network error: ${err.message}. Please check your connection and try again.`);
        
    } finally {
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
    }
});

// ✅ PAGE LOAD INITIALIZATION
document.addEventListener('DOMContentLoaded', function() {
    initDashboard();
});

// ✅ CHECK FOR RETURNING INVESTOR
window.onload = function() {
    const investorEmail = localStorage.getItem("investorEmail");
    if (investorEmail) {
        switchToInvestorView();
    } else {
        switchToVisitorView();
    }
};
</script>
</body>
</html>
