<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Omkar Investor Dashboard</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { background-color: #f8f9fa; }
    .dashboard-card { border-radius: 1rem; box-shadow: 0 0 10px rgba(0,0,0,0.1); padding:20px; }
    #consentPopup {
      position: fixed; top:0; left:0; width:100%; height:100%;
      background: rgba(0,0,0,0.7); display:none;
      align-items:center; justify-content:center; z-index:9999;
    }
    #consentBox {
      background:#fff; padding:20px; border-radius:10px; max-width:400px; width:90%;
    }
    #consentBox input, #consentBox button { width:100%; margin:8px 0; padding:10px; }
    #consentBox button { background:#0A2540; color:#fff; border:none; border-radius:5px; cursor:pointer; }
    #consentBox button:hover { background:#C9A227; color:#000; }
  </style>
</head>
<body>

<!-- Consent Popup -->
<div id="consentPopup">
  <div id="consentBox">
    <h4>Consent Required</h4>
    <p>Omkar Enterprises is a private consultancy firm. We do not raise public deposits. This discussion is private and contractual.</p>
    <form action="https://script.google.com/macros/s/AKfycbynp8VHTHNb82RMWZKv1UHVV46M_TmtdRRT1_01A-XeQ7WxnRA4wMBdq6mc-wGpBQw_/exec" method="POST">
      <input type="hidden" name="consent" value="true">
      <input type="text" name="name" placeholder="Full Name" required>
      <input type="email" name="email" placeholder="Email Address" required>
      <input type="tel" name="phone" placeholder="Contact Number" required>
      <button type="submit">Proceed</button>
    </form>
  </div>
</div>

<!-- Dashboard -->
<div class="container py-4" id="mainDashboard" style="display:none;">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">Omkar Enterprises Investor Relations</h2>
    <button class="btn btn-outline-danger" id="logoutBtn">Logout</button>
  </div>

  <!-- Tabs -->
  <ul class="nav nav-tabs" id="dashboardTabs">
    <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#overview">Overview</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#investor">My Investments</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#agreement">Agreements</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#earnings">How You Earn</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#hotdeals">Hot Deals</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#faq">FAQ</a></li>
  </ul>

  <div class="tab-content pt-4">
    <!-- Overview for Visitors -->
    <div class="tab-pane fade show active" id="overview">
      <div id="visitorOverview">
        <div class="row g-3 mb-4">
          <div class="col-md-4">
            <div class="dashboard-card text-center">
              <h5>Total Investments</h5>
              <h3>₹25 Cr</h3>
            </div>
          </div>
          <div class="col-md-4">
            <div class="dashboard-card text-center">
              <h5>Total Payouts</h5>
              <h3>₹7 Cr</h3>
            </div>
          </div>
          <div class="col-md-4">
            <div class="dashboard-card text-center">
              <h5>Active Investors</h5>
              <h3>180</h3>
            </div>
          </div>
        </div>

        <div class="row g-3">
          <div class="col-md-6">
            <div class="dashboard-card">
              <h6>Investments vs Payouts</h6>
              <canvas id="investmentChart"></canvas>
            </div>
          </div>
          <div class="col-md-6">
            <div class="dashboard-card">
              <h6>Investor Tenure Distribution</h6>
              <canvas id="tenureChart"></canvas>
            </div>
          </div>
        </div>

        <div class="mt-4">
          <a href="sample-agreement.pdf" class="btn btn-primary" target="_blank">View Sample Agreement</a>
        </div>
      </div>
    </div>

    <!-- Investor Dashboard -->
    <div class="tab-pane fade" id="investor">
      <div class="dashboard-card">
        <h5>Welcome, <span id="investorName"></span></h5>
        <p><strong>Email:</strong> <span id="investorEmail"></span></p>
        <p><strong>Phone:</strong> <span id="investorPhone"></span></p>
        <p><strong>Consent:</strong> <span id="investorConsent"></span></p>
      </div>
    </div>

    <!-- Agreements -->
    <div class="tab-pane fade" id="agreement">
      <div class="dashboard-card">
        <h5>Your Agreements</h5>
        <p>Download your signed agreements here (coming soon).</p>
      </div>
    </div>

    <!-- Earnings -->
    <div class="tab-pane fade" id="earnings">
      <div class="dashboard-card">
        <h5>How You Earn</h5>
        <p>Investors earn fixed monthly returns through structured lending opportunities. Payouts are consistent and secured with agreements.</p>
      </div>
    </div>

    <!-- Hot Deals -->
    <div class="tab-pane fade" id="hotdeals">
      <div class="dashboard-card">
        <h5>Hot Deals</h5>
        <p>Start lending instantly (coming soon)</p>
      </div>
    </div>

    <!-- FAQ -->
    <div class="tab-pane fade" id="faq">
      <div class="dashboard-card">
        <h5>FAQ</h5>
        <div id="faqContent">
          <p>Loading FAQ...</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
const consentPopup = document.getElementById('consentPopup');
const mainDashboard = document.getElementById('mainDashboard');
const logoutBtn = document.getElementById('logoutBtn');

// Check if user already consented
window.onload = function() {
  const email = localStorage.getItem('investorEmail');
  if(email){
    mainDashboard.style.display = 'block';
    consentPopup.style.display = 'none';
    document.getElementById('investorName').textContent = localStorage.getItem('investorName') || "Investor";
    document.getElementById('investorEmail').textContent = email;
    document.getElementById('investorPhone').textContent = localStorage.getItem('investorPhone') || "-";
    document.getElementById('investorConsent').textContent = "Yes";
    document.getElementById('visitorOverview').style.display = 'none';
  } else {
    consentPopup.style.display = 'flex';
    mainDashboard.style.display = 'none';
  }
};

// Logout
logoutBtn.addEventListener('click', () => {
  localStorage.clear();
  location.reload();
});

// Charts
new Chart(document.getElementById('investmentChart'), {
  type: 'bar',
  data: {
    labels: ['Jan','Feb','Mar','Apr','May','Jun'],
    datasets: [
      { label:'Investments', data:[5,7,9,12,15,18], backgroundColor:'#0A2540' },
      { label:'Payouts', data:[1,2,3,4,5,6], backgroundColor:'#C9A227' }
    ]
  }
});

new Chart(document.getElementById('tenureChart'), {
  type:'pie',
  data:{
    labels:['Quarterly','Biannual','Annual'],
    datasets:[{ data:[40,30,30], backgroundColor:['#0A2540','#C9A227','#4CAF50'] }]
  }
});
</script>

</body>
</html>
