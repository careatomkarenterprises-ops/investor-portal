<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Omkar Enterprises - Premium Investor Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #0A2540;
            --secondary: #C9A227;
            --accent: #2E8B57;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --info: #17a2b8;
            --premium: #FFD700;
        }

        .premium-gradient {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
        }

        .gold-border {
            border: 2px solid var(--premium);
        }

        .investment-card {
            transition: all 0.3s ease;
            border: none;
            border-radius: 15px;
            overflow: hidden;
        }

        .investment-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .premium-badge {
            background: linear-gradient(45deg, var(--premium), #FFA500);
            color: var(--dark);
            font-weight: 700;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 3px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.12);
        }

        .conversion-funnel {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .funnel-step {
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border-left: 4px solid var(--secondary);
            background: var(--light);
        }

        .lead-magnet {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }

        .visitor-analytics {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .progress-ring {
            width: 120px;
            height: 120px;
        }

        .animated-progress {
            animation: progressFill 2s ease-out;
        }

        @keyframes progressFill {
            from { stroke-dashoffset: 314; }
            to { stroke-dashoffset: var(--target-offset); }
        }

        .hot-deal {
            position: relative;
            overflow: hidden;
        }

        .hot-deal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--danger), var(--warning));
        }

        .trust-badge {
            display: inline-flex;
            align-items: center;
            background: var(--light);
            padding: 8px 15px;
            border-radius: 25px;
            margin: 5px;
            font-size: 0.85rem;
        }

        .floating-cta {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .testimonial-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 15px 0;
            border-left: 4px solid var(--secondary);
        }

        .visitor-journey {
            background: white;
            border-radius: 15px;
            padding: 25px;
        }
    </style>
</head>
<body class="bg-light">
    <!-- Premium Header -->
    <nav class="navbar navbar-expand-lg navbar-dark premium-gradient">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <div class="bg-white rounded-circle p-2 me-3">
                    <i class="fas fa-crown text-warning"></i>
                </div>
                <span class="fw-bold">Omkar Enterprises</span>
                <span class="badge bg-warning text-dark ms-2">Investor Portal</span>
            </a>
            
            <div class="navbar-nav ms-auto">
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        <i class="fas fa-user me-1"></i> Visitor Access
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#" onclick="showVisitorLogin()"><i class="fas fa-sign-in-alt me-2"></i>Investor Login</a></li>
                        <li><a class="dropdown-item" href="#" onclick="showConsentPopup()"><i class="fas fa-user-plus me-2"></i>Become Investor</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <!-- Visitor Analytics Dashboard -->
    <div class="container py-4" id="visitorDashboard">
        <!-- Conversion Funnel -->
        <div class="conversion-funnel">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h3 class="mb-4"><i class="fas fa-funnel-dollar me-2 text-primary"></i>Your Path to Becoming an Investor</h3>
                    <div class="funnel-step">
                        <div class="d-flex align-items-center">
                            <div class="bg-primary text-white rounded-circle p-2 me-3" style="width: 40px; height: 40px; text-align: center;">
                                <span class="fw-bold">1</span>
                            </div>
                            <div>
                                <h6 class="mb-1">Explore Opportunities</h6>
                                <p class="mb-0 text-muted">Browse our curated investment options</p>
                            </div>
                            <div class="ms-auto">
                                <span class="badge bg-success">Active</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="funnel-step">
                        <div class="d-flex align-items-center">
                            <div class="bg-secondary text-white rounded-circle p-2 me-3" style="width: 40px; height: 40px; text-align: center;">
                                <span class="fw-bold">2</span>
                            </div>
                            <div>
                                <h6 class="mb-1">Calculate Returns</h6>
                                <p class="mb-0 text-muted">Use our calculator to project your earnings</p>
                            </div>
                            <div class="ms-auto">
                                <button class="btn btn-sm btn-outline-primary" onclick="scrollToCalculator()">Start Calculating</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="funnel-step">
                        <div class="d-flex align-items-center">
                            <div class="bg-warning text-dark rounded-circle p-2 me-3" style="width: 40px; height: 40px; text-align: center;">
                                <span class="fw-bold">3</span>
                            </div>
                            <div>
                                <h6 class="mb-1">Express Interest</h6>
                                <p class="mb-0 text-muted">Select your preferred investment option</p>
                            </div>
                            <div class="ms-auto">
                                <span class="badge bg-light text-muted">Next Step</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="funnel-step">
                        <div class="d-flex align-items-center">
                            <div class="bg-success text-white rounded-circle p-2 me-3" style="width: 40px; height: 40px; text-align: center;">
                                <span class="fw-bold">4</span>
                            </div>
                            <div>
                                <h6 class="mb-1">Become Investor</h6>
                                <p class="mb-0 text-muted">Complete registration and start investing</p>
                            </div>
                            <div class="ms-auto">
                                <span class="badge bg-light text-muted">Final Step</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4 text-center">
                    <div class="position-relative d-inline-block">
                        <svg class="progress-ring" viewBox="0 0 120 120">
                            <circle cx="60" cy="60" r="54" fill="none" stroke="#e6e6e6" stroke-width="8"/>
                            <circle cx="60" cy="60" r="54" fill="none" stroke="#28a745" stroke-width="8" 
                                    stroke-dasharray="339.292" stroke-dashoffset="237.504" 
                                    class="animated-progress" style="--target-offset: 237.504;"/>
                        </svg>
                        <div class="position-absolute top-50 start-50 translate-middle">
                            <h3 class="mb-0 text-success">30%</h3>
                            <small class="text-muted">Complete</small>
                        </div>
                    </div>
                    <p class="mt-3 text-muted">You're making great progress toward becoming an investor!</p>
                </div>
            </div>
        </div>

        <!-- Lead Magnet Section -->
        <div class="lead-magnet">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h4 class="mb-3"><i class="fas fa-gift me-2"></i>Exclusive Investor Starter Pack</h4>
                    <p class="mb-3">Get instant access to our premium investment guide + personalized portfolio consultation when you express interest today!</p>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check me-2"></i> Comprehensive Investment Guide (PDF)</li>
                        <li><i class="fas fa-check me-2"></i> Personalized ROI Calculation</li>
                        <li><i class="fas fa-check me-2"></i> Priority Access to Hot Deals</li>
                        <li><i class="fas fa-check me-2"></i> Dedicated Relationship Manager</li>
                    </ul>
                </div>
                <div class="col-md-4 text-center">
                    <button class="btn btn-warning btn-lg fw-bold" onclick="showLeadCapture()">
                        <i class="fas fa-download me-2"></i>GET STARTER PACK
                    </button>
                    <p class="small mt-2">Limited time offer</p>
                </div>
            </div>
        </div>

        <!-- Investment Opportunities Grid -->
        <div class="row mb-4">
            <div class="col-12">
                <h3 class="mb-4"><i class="fas fa-chart-line me-2 text-primary"></i>Featured Investment Opportunities</h3>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="investment-card hot-deal bg-white">
                    <div class="p-4">
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <span class="premium-badge">HOT DEAL</span>
                            <span class="badge bg-danger">Limited Spots</span>
                        </div>
                        <h5>Fixed Income Plus</h5>
                        <p class="text-muted">Stable monthly returns with capital protection</p>
                        
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-2">
                                <span>Expected Returns</span>
                                <strong class="text-success">12.5% p.a.</strong>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Minimum Investment</span>
                                <strong>₹50,000</strong>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Tenure</span>
                                <strong>12 Months</strong>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span>Available Slots</span>
                                <strong class="text-danger">8/25 Left</strong>
                            </div>
                        </div>
                        
                        <div class="progress mb-3" style="height: 8px;">
                            <div class="progress-bar bg-danger" style="width: 32%"></div>
                        </div>
                        
                        <button class="btn btn-primary w-100" onclick="expressInterest('fixed_income_plus')">
                            <i class="fas fa-bolt me-2"></i>Express Interest
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="investment-card bg-white gold-border">
                    <div class="p-4">
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <span class="premium-badge">PREMIUM</span>
                            <span class="badge bg-success">Most Popular</span>
                        </div>
                        <h5>Commercial Real Estate Fund</h5>
                        <p class="text-muted">Premium commercial properties with rental yields</p>
                        
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-2">
                                <span>Expected Returns</span>
                                <strong class="text-success">14.8% p.a.</strong>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Minimum Investment</span>
                                <strong>₹2,00,000</strong>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Tenure</span>
                                <strong>24 Months</strong>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span>Available Slots</span>
                                <strong class="text-warning">15/40 Left</strong>
                            </div>
                        </div>
                        
                        <div class="progress mb-3" style="height: 8px;">
                            <div class="progress-bar bg-warning" style="width: 37.5%"></div>
                        </div>
                        
                        <button class="btn btn-warning w-100" onclick="expressInterest('real_estate_fund')">
                            <i class="fas fa-crown me-2"></i>Select Premium
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="investment-card bg-white">
                    <div class="p-4">
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <span class="badge bg-info">NEW</span>
                            <span class="badge bg-secondary">Tech Focus</span>
                        </div>
                        <h5>Tech Innovation Portfolio</h5>
                        <p class="text-muted">High-growth technology startups portfolio</p>
                        
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-2">
                                <span>Expected Returns</span>
                                <strong class="text-success">18-25% p.a.</strong>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Minimum Investment</span>
                                <strong>₹1,00,000</strong>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Tenure</span>
                                <strong>36 Months</strong>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span>Available Slots</span>
                                <strong class="text-info">22/30 Left</strong>
                            </div>
                        </div>
                        
                        <div class="progress mb-3" style="height: 8px;">
                            <div class="progress-bar bg-info" style="width: 73%"></div>
                        </div>
                        
                        <button class="btn btn-outline-primary w-100" onclick="expressInterest('tech_portfolio')">
                            <i class="fas fa-rocket me-2"></i>Explore Opportunity
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ROI Calculator Section -->
        <div class="visitor-analytics" id="roiCalculator">
            <h3 class="mb-4"><i class="fas fa-calculator me-2 text-primary"></i>Investment Return Calculator</h3>
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Investment Amount (₹)</label>
                        <input type="range" class="form-range" id="amountRange" min="50000" max="5000000" step="50000" value="500000">
                        <div class="d-flex justify-content-between">
                            <span>₹50,000</span>
                            <strong id="amountDisplay">₹5,00,000</strong>
                            <span>₹50,00,000</span>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Investment Tenure</label>
                        <select class="form-select" id="tenureSelect">
                            <option value="6">6 Months</option>
                            <option value="12" selected>12 Months</option>
                            <option value="24">24 Months</option>
                            <option value="36">36 Months</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Expected Return Rate (%)</label>
                        <select class="form-select" id="returnSelect">
                            <option value="10.5">Fixed Income (10.5%)</option>
                            <option value="12.5" selected>Balanced (12.5%)</option>
                            <option value="14.8">Premium (14.8%)</option>
                            <option value="18.0">Growth (18.0%)</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-primary w-100" onclick="calculateVisitorROI()">
                        <i class="fas fa-chart-bar me-2"></i>Calculate My Returns
                    </button>
                </div>
                
                <div class="col-md-6">
                    <div class="bg-light rounded p-4 h-100">
                        <h5 class="text-center mb-4">Your Projected Returns</h5>
                        <div id="roiResults">
                            <div class="text-center text-muted">
                                <i class="fas fa-calculator fa-3x mb-3"></i>
                                <p>Enter your details to see projected returns</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Trust Indicators -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="visitor-analytics">
                    <h4 class="mb-4"><i class="fas fa-shield-alt me-2 text-primary"></i>Why Investors Trust Omkar Enterprises</h4>
                    <div class="row text-center">
                        <div class="col-md-3 mb-3">
                            <div class="trust-badge">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <span>Registered MSME</span>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="trust-badge">
                                <i class="fas fa-history text-primary me-2"></i>
                                <span>Since 2010</span>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="trust-badge">
                                <i class="fas fa-users text-info me-2"></i>
                                <span>142+ Investors</span>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="trust-badge">
                                <i class="fas fa-rupee-sign text-success me-2"></i>
                                <span>₹8.2Cr+ Deployed</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Success Stories -->
        <div class="row">
            <div class="col-md-6">
                <div class="visitor-analytics">
                    <h5 class="mb-4"><i class="fas fa-chart-line me-2 text-success"></i>Performance Track Record</h5>
                    <canvas id="performanceChart" height="250"></canvas>
                </div>
            </div>
            <div class="col-md-6">
                <div class="visitor-journey">
                    <h5 class="mb-4"><i class="fas fa-user-check me-2 text-primary"></i>Recent Success Stories</h5>
                    
                    <div class="testimonial-card">
                        <div class="d-flex align-items-center mb-3">
                            <div class="bg-primary text-white rounded-circle p-2 me-3" style="width: 40px; height: 40px; text-align: center;">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <h6 class="mb-0">Rajesh Kumar</h6>
                                <small class="text-muted">Invested ₹5,00,000</small>
                            </div>
                        </div>
                        <p class="mb-0">"Started with one investment, now have three active portfolios. Consistent returns and transparent communication."</p>
                        <div class="mt-2">
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                        </div>
                    </div>
                    
                    <div class="testimonial-card">
                        <div class="d-flex align-items-center mb-3">
                            <div class="bg-success text-white rounded-circle p-2 me-3" style="width: 40px; height: 40px; text-align: center;">
                                <i class="fas fa-user-tie"></i>
                            </div>
                            <div>
                                <h6 class="mb-0">Priya Sharma</h6>
                                <small class="text-muted">Invested ₹2,00,000</small>
                            </div>
                        </div>
                        <p class="mb-0">"The fixed income plan gives me regular monthly returns that supplement my salary. Very reliable."</p>
                        <div class="mt-2">
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating CTA -->
    <div class="floating-cta">
        <button class="btn btn-warning btn-lg shadow-lg" onclick="showLeadCapture()">
            <i class="fas fa-crown me-2"></i>Start Investing
        </button>
    </div>

    <!-- Modals and Popups -->
    <div id="visitorLoginModal" class="modal fade">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header premium-gradient text-white">
                    <h5 class="modal-title"><i class="fas fa-unlock me-2"></i>Existing Investor Login</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="visitorLoginForm">
                        <div class="mb-3">
                            <label class="form-label">Investor ID / Email</label>
                            <input type="email" class="form-control" id="loginEmail" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="loginPhone" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 mb-3">
                            <i class="fas fa-sign-in-alt me-2"></i>Access My Portfolio
                        </button>
                    </form>
                    <div class="text-center">
                        <p class="text-muted">New to Omkar Enterprises?</p>
                        <button class="btn btn-outline-primary" onclick="$('#visitorLoginModal').modal('hide'); showConsentPopup();">
                            Become an Investor
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="leadCaptureModal" class="modal fade">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title"><i class="fas fa-download me-2"></i>Get Your Investor Starter Pack</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="leadCaptureForm">
                        <div class="mb-3">
                            <label class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="leadName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email Address</label>
                            <input type="email" class="form-control" id="leadEmail" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="leadPhone" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Investment Interest</label>
                            <select class="form-select" id="leadInterest">
                                <option value="">Select preferred investment</option>
                                <option value="fixed_income">Fixed Income Plus</option>
                                <option value="real_estate">Commercial Real Estate</option>
                                <option value="tech_portfolio">Tech Innovation</option>
                                <option value="not_sure">Not Sure Yet</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Potential Investment Amount</label>
                            <select class="form-select" id="leadAmount">
                                <option value="">Select amount range</option>
                                <option value="50000-100000">₹50,000 - ₹1,00,000</option>
                                <option value="100000-500000">₹1,00,000 - ₹5,00,000</option>
                                <option value="500000-1000000">₹5,00,000 - ₹10,00,000</option>
                                <option value="1000000+">Above ₹10,00,000</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-success w-100">
                            <i class="fas fa-download me-2"></i>Get Starter Pack & Continue
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Google Apps Script URL
        const scriptURL = "https://script.google.com/macros/s/AKfycbwDI4zbTKZDPupfMQGVyTWKSC264583ppfxCHY4_dtadWQ4_HWaNdnoUigDJE19P5Lt/exec";

        // Visitor Analytics Data
        let visitorData = {
            pageViews: 1,
            timeOnSite: 0,
            opportunitiesViewed: [],
            calculatorUsed: false,
            interestsExpressed: 0,
            conversionScore: 30
        };

        // Initialize Visitor Dashboard
        function initVisitorDashboard() {
            startTimeTracking();
            initPerformanceChart();
            setupVisitorEventListeners();
            updateAmountDisplay();
            
            // Track initial page view
            trackVisitorAction('page_view', 'visitor_dashboard');
        }

        // Time Tracking
        function startTimeTracking() {
            setInterval(() => {
                visitorData.timeOnSite++;
                updateConversionScore();
            }, 1000);
        }

        // Update Conversion Score
        function updateConversionScore() {
            let score = 30;
            
            // Base points
            if (visitorData.timeOnSite > 60) score += 10;
            if (visitorData.opportunitiesViewed.length > 0) score += 15;
            if (visitorData.calculatorUsed) score += 25;
            if (visitorData.interestsExpressed > 0) score += 20;
            
            visitorData.conversionScore = Math.min(score, 100);
            updateProgressRing();
        }

        // Update Progress Ring
        function updateProgressRing() {
            const circumference = 339.292;
            const offset = circumference - (visitorData.conversionScore / 100) * circumference;
            
            document.querySelector('.animated-progress').style.strokeDashoffset = offset;
            document.querySelector('.progress-ring h3').textContent = `${visitorData.conversionScore}%`;
        }

        // Track Visitor Actions
        function trackVisitorAction(action, details) {
            visitorData[action] = details;
            updateConversionScore();
            
            // In production, send this to your analytics
            console.log('Visitor Action:', action, details);
        }

        // Show Visitor Login
        function showVisitorLogin() {
            const modal = new bootstrap.Modal(document.getElementById('visitorLoginModal'));
            modal.show();
            trackVisitorAction('modal_view', 'investor_login');
        }

        // Show Lead Capture
        function showLeadCapture() {
            const modal = new bootstrap.Modal(document.getElementById('leadCaptureModal'));
            modal.show();
            trackVisitorAction('modal_view', 'lead_capture');
        }

        // Express Interest in Opportunity
        function expressInterest(opportunityId) {
            visitorData.interestsExpressed++;
            visitorData.opportunitiesViewed.push(opportunityId);
            
            trackVisitorAction('interest_expressed', opportunityId);
            
            // Show lead capture modal
            showLeadCapture();
            
            // Update UI
            updateOpportunityProgress(opportunityId);
        }

        // Update Opportunity Progress
        function updateOpportunityProgress(opportunityId) {
            const progressBars = {
                'fixed_income_plus': '.bg-danger',
                'real_estate_fund': '.bg-warning',
                'tech_portfolio': '.bg-info'
            };
            
            const bar = document.querySelector(progressBars[opportunityId]);
            if (bar) {
                let currentWidth = parseInt(bar.style.width);
                bar.style.width = Math.min(currentWidth + 5, 100) + '%';
            }
        }

        // Calculate Visitor ROI
        function calculateVisitorROI() {
            const amount = parseInt(document.getElementById('amountRange').value);
            const tenure = parseInt(document.getElementById('tenureSelect').value);
            const returnRate = parseFloat(document.getElementById('returnSelect').value);
            
            const monthlyRate = returnRate / 12 / 100;
            const totalReturns = amount * monthlyRate * tenure;
            const totalValue = amount + totalReturns;
            const monthlyReturns = totalReturns / tenure;
            
            visitorData.calculatorUsed = true;
            trackVisitorAction('calculator_used', {amount, tenure, returnRate});
            
            // Display results
            document.getElementById('roiResults').innerHTML = `
                <div class="text-center">
                    <div class="row mb-3">
                        <div class="col-6">
                            <div class="bg-primary text-white rounded p-3">
                                <h6>Total Returns</h6>
                                <h4>₹${totalReturns.toLocaleString('en-IN')}</h4>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="bg-success text-white rounded p-3">
                                <h6>Final Value</h6>
                                <h4>₹${totalValue.toLocaleString('en-IN')}</h4>
                            </div>
                        </div>
                    </div>
                    <div class="bg-light rounded p-3 mb-3">
                        <h6>Monthly Returns: <strong>₹${monthlyReturns.toLocaleString('en-IN')}</strong></h6>
                        <small class="text-muted">Approximate monthly income</small>
                    </div>
                    <button class="btn btn-warning w-100" onclick="showLeadCapture()">
                        <i class="fas fa-bolt me-2"></i>Start Investing
                    </button>
                </div>
            `;
        }

        // Update Amount Display
        function updateAmountDisplay() {
            const amount = document.getElementById('amountRange').value;
            document.getElementById('amountDisplay').textContent = `₹${parseInt(amount).toLocaleString('en-IN')}`;
        }

        // Scroll to Calculator
        function scrollToCalculator() {
            document.getElementById('roiCalculator').scrollIntoView({ 
                behavior: 'smooth' 
            });
            trackVisitorAction('navigation', 'calculator_section');
        }

        // Initialize Performance Chart
        function initPerformanceChart() {
            const ctx = document.getElementById('performanceChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct'],
                    datasets: [{
                        label: 'Portfolio Growth (%)',
                        data: [100, 112, 118, 125, 131, 128, 135, 142, 148, 155],
                        borderColor: '#2E8B57',
                        backgroundColor: 'rgba(46, 139, 87, 0.1)',
                        borderWidth: 3,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'Cumulative Returns Over Time'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'Growth (%)'
                            }
                        }
                    }
                }
            });
        }

        // Setup Event Listeners
        function setupVisitorEventListeners() {
            // Amount range slider
            document.getElementById('amountRange').addEventListener('input', updateAmountDisplay);
            
            // Login form
            document.getElementById('visitorLoginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const phone = document.getElementById('loginPhone').value;
                
                // In production, validate credentials and redirect to investor dashboard
                alert('Investor login functionality would connect to your backend here');
                trackVisitorAction('login_attempt', {email, phone});
            });
            
            // Lead capture form
            document.getElementById('leadCaptureForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = {
                    name: document.getElementById('leadName').value,
                    email: document.getElementById('leadEmail').value,
                    phone: document.getElementById('leadPhone').value,
                    interest: document.getElementById('leadInterest').value,
                    amount: document.getElementById('leadAmount').value,
                    timestamp: new Date().toISOString(),
                    conversionScore: visitorData.conversionScore
                };
                
                // Save lead to Google Sheets
                fetch(scriptURL, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: `action=save_lead&data=${encodeURIComponent(JSON.stringify(formData))}`
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        // Show success message and redirect to consent
                        alert('Thank you! Your Investor Starter Pack is being prepared. Redirecting to registration...');
                        $('#leadCaptureModal').modal('hide');
                        showConsentPopup();
                    }
                })
                .catch(error => {
                    console.error('Error saving lead:', error);
                    alert('Lead captured locally. Please contact us directly.');
                });
                
                trackVisitorAction('lead_captured', formData);
            });
            
            // Track opportunity views
            document.querySelectorAll('.investment-card').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    const opportunityId = this.querySelector('button').getAttribute('onclick').match(/'([^']+)'/)[1];
                    if (!visitorData.opportunitiesViewed.includes(opportunityId)) {
                        visitorData.opportunitiesViewed.push(opportunityId);
                        trackVisitorAction('opportunity_viewed', opportunityId);
                    }
                });
            });
        }

        // Show Consent Popup (from your existing code)
        function showConsentPopup() {
            // This would show your existing consent popup
            alert('Redirecting to investor registration...');
            trackVisitorAction('registration_started', 'consent_popup');
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initVisitorDashboard();
        });
    </script>
</body>
</html>
